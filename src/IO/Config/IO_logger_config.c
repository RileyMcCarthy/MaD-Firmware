//
// Created by Riley McCarthy on 25/04/24.
//
/**********************************************************************
 * Includes
 **********************************************************************/
#include "IO_logger.h"
/**********************************************************************
 * Constants
 **********************************************************************/

/*********************************************************************
 * Macros
 **********************************************************************/

/**********************************************************************
 * Typedefs
 **********************************************************************/

/**********************************************************************
 * External Variables
 **********************************************************************/

/**********************************************************************
 * Private Variable Definitions
 **********************************************************************/

IO_LOGGER_CHANNEL_DATA_DEFINE(SAMPLE_DATA, IO_logger_testSample_S, 64, "a+", SD_CARD_MOUNT_PATH "/test/%s.csv")
{
    bool result = false;
    IO_logger_testSample_S sample;
    if (lib_staticQueue_pop(queue, &sample))
    {
        fprintf(file, "%d,%d,%d,%d\n", sample.time, sample.index, sample.force, sample.position);
        result = true;
    }
    return result;
}

IO_logger_config_S IO_logger_config = {
    {
        IO_LOGGER_CHANNEL_CREATE(SAMPLE_DATA),
    },
};

/**********************************************************************
 * Private Function Prototypes
 **********************************************************************/

/**********************************************************************
 * Private Function Definitions
 **********************************************************************/

/**********************************************************************
 * Public Function Definitions
 **********************************************************************/

/**********************************************************************
 * End of File
 **********************************************************************/
